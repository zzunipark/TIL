# Top

#### Top 명령어는 운영체제의 상태를 나타내주는 명령어입니다.

CPU 사용량 및 메모리 사용량을 나타내며, 명령어가 실행되는 동안 주기적으로 업데이트되어 실시간 정보를 확인할 수도 있습니다.  
Top 명령어를 실행할 경우 상단에는 기본적인 요약 정보가 표시되며, 하단에는 각 프로세스별 상세정보를 포함하고 있습니다.

### 요약 영역

요약 영역은 상단에 위치하고 있으며, 시간, 유저, 평균 로드율, 작업, CPU 사용량, 메모리 사용량을 표기해 줍니다.  
시스템에 따라 디스크 사용량과 같은 기타 정보를 포함하고 있을 수 있습니다.

### 평균 로드율 ( Load Average )

평균 로드율은 CPU 부하량의 이동 평균을 나타냅니다.  
`Load Avg: 5.0, 5.1, 6.2` 이런 형식으로 출력되며, 순서대로 5분, 10분, 15분 평균 부하량을 나타냅니다.  
1코어 100% 부하당 1.0이 올라가며, 12코어 CPU에서 전체 코어가 15분 내내 50% 부하로 작동되고 있었다면, `Load Avg: 6.0, 6.0, 6.0`으로 표시되게 됩니다.

### 작업 ( Tasks )

Tasks는 현재 프로세스들의 상태를 나타냅니다. Total은 전체 프로세스 수, Running은 동작중인 프로세스, Sleeping은 대기 상태인 프로세스, Stopped는 종료된 프로세스, Zombie는 좀비 상태인 프로세스를 나타냅니다.

프로세스는 I/O 기반의 일과 CPU 기반의 일을 번갈아가며 하게 되는데, I/O 기반의 일을 할 때에는 프로세스가 점유하는 CPU 로드율이 0%로 변하며, Idle 상태로 변하게 됩니다.  
또한 운영체제의 프로세스 스케줄링에 의해 프로세스는 번갈아가며 실행되게 되는데, 이렇게 멀티테스킹 작업을 실행 할 때 아래와 같은 상태 변동이 있습니다.

- 실행중 : CPU에 의해 명령어가 실행중인 프로세스
- 준비 : CPU의 명령을 기다리는 프로세스
- 대기 : I/O 작업이 끝나길 기다리는 프로세스
- 종료 : 시그널로 종료된 프로세스
- 좀비 : 프로세스는 루트 프로세스로부터 뻗어나온 자식 프로세스로 트리구조를 형성하는데, 자식 프로세스보다 부모 프로세스가 먼저 종료된다면 부모 프로세스로부터 닿을 수 없는 프로세스가 생기는데, 이를 좀비 프로세스라 부릅니다.

### CPU 사용량 ( %Cpu(s) )

%Cpu(s)영역은 CPU가 어떻게 사용되어지고 있는지 그 사용률을 나타내는 영역입니다.  
100%를 기준으로 나누어서 보여주며, 각 요소별 의미는 다음과 같습니다 :

- us : 프로세스의 유저 영역에서의 사용률
- sy : 프로세스의 커널 영역에서의 사용률
- ni : 프로세스의 우선순위 설정에 사용되는 사용률
- id : 사용하고 있지 않은 비율
- wa : I/O 작업이 완료될 때까지 대기중인 비율
- hi : 하드웨어 인터럽트에 사용되는 CPU 사용률
- si : 소프트웨어 인터럽트에 사용되는 CPU 사용률
- st : CPU를 VM에서 사용하여 대기하는 CPU 비율

<small>하드웨어 인터럽트 : 전원 이상, 기계 착오, 외부 신호, 입출력 등 프로세스 외부에서 발생하는 인터럽트<br/>소프트웨어 인터럽트 : 프로세스 내부에서 잘못된 명령어, 데이터로 예외가 발생하는 것이며 trap이라고 불림</small>

### 메모리 사용량 ( RAM Usage )

MEM 영역은 순수 RAM 사용량 영역, SWAP 영역은 메모리 부족 시 SWAP 메모리를 사용하는데, 이에 대한 사용량 부분입니다.  
SWAP 메모리는 디스크 영역이기에 느리다는 단점이 있습니다.  
반대로 RAM을 디스크로 사용하는 RAMDISK 기술이 있으나, 용량 등의 문제로 사용화되진 않았습니다.

- Total : 총 메모리 양
- Free : 사용 가능한 메모리 양
- Used : 사용중인 메모리 양

Buff는 Buffers의 약자로, 커널 버퍼에서 사용되는 메모리를 뜻합니다.  
Cache는 디스크의 페이지 캐시를 의미합니다.  
즉 Buff/Cache는 I/O 작업과 관련되어 버퍼에 사용되는 메모리를 말합니다.  
이 메모리 덕분에 빠른 속도로 I/O 처리가 가능합니다.
Avail Memory 영역은 Swap 메모리를 제외한 사용 가능 메모리 크기를 말합니다.

### 상세 정보 영역

**운영체제별 상세 정보가 상이할 수 있습니다.**

- PID : Process ID, 프로세스가 가진 고유한 ID
- USER : 해당 프로세스를 실행한 유저네임, 또는 효과를 받는 유저네임
- PR : 커널에 의해 스케줄링되는 우선순위
- VIRT : 프로세스가 소비중인 메모리의 총량
- RES : RAM에서 사용중인 메모리의 크기
- SHR : 다른 프로세스와의 공유 메모리 크기
- %MEM : 전체 시스템 RAM 용량에서 RES가 차지하는 비율
- S : 프로세스의 현재 상태
- TIME+ : 프로세스가 사용한 CPU 시간
- COMMAND : 해당 프로세스를 실행한 커맨드
